# Mindbox
## Тестовое задание на позицию SRE/DevOps-инженер (стажер)
### Результат задания - yaml манифест

### Описание решения
Описан Kubernetes-манифест для веб-приложения, учитывая все условия задачи: мультизональный кластер, пики нагрузки днём и минимальное потребление ресурсов ночью.

### Deployment (приложение)
**Минимум 2 пода** — чтобы приложение всегда оставалось доступным, даже если один узел или зона выйдет из строя.

**Антиаффинити по зонам** — поды стараются распределяться по разным зонам кластера, что повышает отказоустойчивость.

**RollingUpdate стратегия** — новые версии выкатываются постепенно, без даунтайма (сначала поднимается новый под, только потом удаляется старый).

**Ресурсы:**
* Requests: 100m CPU, 128Mi memory — базовая нагрузка приложения.
* Limits: 300m CPU, 256Mi memory — с запасом на пиковую инициализацию.
* Такой подход экономит ресурсы ночью и не даёт поду "захватить" лишнее.

**Probes:**
readinessProbe с задержкой 10 секунд — чтобы приложение успело инициализироваться и на него не шёл трафик раньше времени.\
livenessProbe проверяет, что под живой, и перезапускает его при зависании.

### Service
Используем ClusterIP (внутренний сервис) — это даёт постоянный виртуальный IP и DNS-имя для подов, которые могут пересоздаваться.\
Service балансирует трафик между подами.\
В случае необходимости можно заменить на LoadBalancer или подключить Ingress для доступа из интернета.

### Автомасштабирование (HPA)
Настроен HorizontalPodAutoscaler:
* Минимум 2 пода (ночью, когда трафика мало).
* Максимум 5 подов (днём, когда трафик высокий).
* Автомасштабирование по загрузке CPU (средняя утилизация 70%).
* Такой подход позволяет держать минимальное количество подов в часы низкой нагрузки и автоматически масштабироваться в пиковое время.

### Итог
Приложение работает в нескольких зонах кластера → отказоустойчивость.\
Благодаря probes приложение не получает трафик до готовности.\
HPA экономит ресурсы ночью и обеспечивает стабильность днём.\
Service даёт стабильный доступ к подам, независимо от того, пересоздаются ли они.

### В результате:
Средний расход ресурсов минимизирован.\
Ошибки при инициализации и перезапусках подов не влияют на пользователей.\
При пиковых нагрузках приложение масштабируется до нужного уровня.\
При сбоях в зоне сервис остаётся доступным.\
Таким образом, манифест учитывает и отказоустойчивость, и экономию ресурсов, и стабильный деплой.